import{d as l,r as m,e as u,p as v,f as b,g as p,h as g,i as k,m as y,s as w,t as M,j as D,n as _,k as S,o as x,q as A,v as B,w as F}from"./cfJQoD7f.js";class U{anchor;#s=new Map;#t=new Map;#e=new Map;#i=new Set;#r=!0;constructor(s,t=!0){this.anchor=s,this.#r=t}#n=()=>{var s=l;if(this.#s.has(s)){var t=this.#s.get(s),e=this.#t.get(t);if(e)m(e),this.#i.delete(t);else{var n=this.#e.get(t);n&&(this.#t.set(t,n.effect),this.#e.delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),e=n.effect)}for(const[r,a]of this.#s){if(this.#s.delete(r),r===s)break;const f=this.#e.get(a);f&&(u(f.effect),this.#e.delete(a))}for(const[r,a]of this.#t){if(r===t||this.#i.has(r))continue;const f=()=>{if(Array.from(this.#s.values()).includes(r)){var h=document.createDocumentFragment();y(a,h),h.append(b()),this.#e.set(r,{effect:a,fragment:h})}else u(a);this.#i.delete(r),this.#t.delete(r)};this.#r||!e?(this.#i.add(r),v(a,f,!1)):f()}}};#a=s=>{this.#s.delete(s);const t=Array.from(this.#s.values());for(const[e,n]of this.#e)t.includes(e)||(u(n.effect),this.#e.delete(e))};ensure(s,t){var e=l,n=w();if(t&&!this.#t.has(s)&&!this.#e.has(s))if(n){var r=document.createDocumentFragment(),a=b();r.append(a),this.#e.set(s,{effect:p(()=>t(a)),fragment:r})}else this.#t.set(s,p(()=>t(this.anchor)));if(this.#s.set(e,s),n){for(const[f,c]of this.#t)f===s?e.skipped_effects.delete(c):e.skipped_effects.add(c);for(const[f,c]of this.#e)f===s?e.skipped_effects.delete(c.effect):e.skipped_effects.add(c.effect);e.oncommit(this.#n),e.ondiscard(this.#a)}else g&&(this.anchor=k),this.#n()}}let o=!1,d=Symbol();function j(i,s,t){const e=t[s]??={store:null,source:S(void 0),unsubscribe:_};if(e.store!==i&&!(d in t))if(e.unsubscribe(),e.store=i??null,i==null)e.source.v=void 0,e.unsubscribe=_;else{var n=!0;e.unsubscribe=x(i,r=>{n?e.source.v=r:A(e.source,r)}),n=!1}return i&&d in t?B(i):F(e.source)}function q(i,s){return i.set(s),s}function C(){const i={};function s(){M(()=>{for(var t in i)i[t].unsubscribe();D(i,d,{enumerable:!1,value:!0})})}return[i,s]}function E(i){var s=o;try{return o=!1,[i(),o]}finally{o=s}}export{U as B,q as a,j as b,E as c,C as s};
